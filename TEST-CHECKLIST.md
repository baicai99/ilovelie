# 我爱撒谎插件 - 功能测试清单

## ✅ 已修复的Bug
- ✅ **恢复功能完全修复**：插件现在支持完整的恢复功能
- ✅ 右键菜单现在包含所有还原功能按钮
- ✅ 历史记录持久化，重启VS Code后不丢失
- ✅ 精确的撤销和还原功能，不再依赖VS Code原生撤销
- ✅ 添加了清除所有历史的功能

## 🧪 测试步骤

### 1. 基础替换功能测试
- [ ] 打开 `test-all-features.js` 文件
- [ ] 选中第一个注释："这是一个用来计算面积的函数"
- [ ] 右键选择 "替换选中的注释"
- [ ] 输入新内容："这个函数用来播放音乐"
- [ ] 验证替换成功

### 2. 右键菜单功能测试 ⭐ **已修复**
在编辑器中右键，应该看到以下选项：
- [ ] "替换选中的注释" (当选中文本时)
- [ ] "撤销上次撒谎" ✅ **精确撤销**
- [ ] "查看撒谎历史" ✅ **持久化历史**
- [ ] "从历史中还原" ✅ **精确还原**
- [ ] "清除所有历史" ✅ **新功能**

### 3. 命令面板功能测试
按 `Ctrl+Shift+P`，应该能找到：
- [ ] "手动替换注释"
- [ ] "替换选中的注释"
- [ ] "撤销上次撒谎"
- [ ] "查看撒谎历史"  
- [ ] "从历史中还原"
- [ ] "清除所有历史" ✅ **新功能**

### 4. 恢复功能测试 ⭐ **重点测试区域**
- [ ] 执行几次注释替换
- [ ] 使用 "撤销上次撒谎" 功能 - 应该精确撤销
- [ ] 使用 "查看撒谎历史" 查看记录 - 记录应该完整
- [ ] 使用 "从历史中还原" 选择特定记录还原 - 应该精确还原
- [ ] 重启VS Code，验证历史记录是否保持 ✅ **持久化**
- [ ] 使用 "清除所有历史" 清除记录 ✅ **新功能**

### 5. 精确恢复测试 ✅ **新功能**
- [ ] 替换注释后，修改文件的其他部分
- [ ] 使用还原功能，验证只还原注释，不影响其他修改
- [ ] 测试跨文件撤销提醒功能

### 6. 多语言支持测试
- [ ] 测试 JavaScript 注释 (`//` 和 `/* */`)
- [ ] 测试 Python 注释 (`#`) - 使用 `demo.py`
- [ ] 验证注释格式保持正确

## 🎯 预期结果
- 所有功能都能正常工作
- 右键菜单包含完整的功能列表
- 历史记录和还原功能正常
- 支持多种编程语言的注释格式

## 🐛 如果发现问题
请记录以下信息：
1. 操作步骤
2. 预期结果
3. 实际结果
4. 错误信息（如有）
5. 浏览器/VS Code版本
